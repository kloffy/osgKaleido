#ifndef OSGKALEIDO_POLYHEDRON_INCLUDED
#define OSGKALEIDO_POLYHEDRON_INCLUDED

#include <osgKaleido/Export>

#include <osg/Geometry>

extern "C" {

typedef struct _Polyhedron Polyhedron;

}

namespace osgKaleido {

/**
 * Polyhedron is a RAII wrapper around kaleido polyhedron data.
 */
class OSGKALEIDO_EXPORT Polyhedron: public osg::Referenced
{
public:
	enum Faces
	{
		None          = 0,
		Triangular    = 1 << 0,
		Quadrilateral = 1 << 1,
		Pentagonal    = 1 << 2,
		Hexagonal     = 1 << 3,
		Heptagonal    = 1 << 4,
		Octagonal     = 1 << 5,
		Nonagonal     = 1 << 6,
		Decagonal     = 1 << 7,
		Hendecagonal  = 1 << 8,
		Dodecagonal   = 1 << 9,
		All           = ~None,
	};

	static Faces sidesToFace(int sides);
	static int faceToSides(Faces faces);

	Polyhedron(std::string const&);

	std::string const& getSymbol() const;

	std::string getName() const;
	std::string getDualName() const;
	std::string getWythoffSymbol() const;
	std::string getVertexConfiguration() const;

	std::size_t Polyhedron::getVertexCount() const;
	std::size_t Polyhedron::getFaceCount() const;
	std::size_t Polyhedron::getFaceCount(Faces) const;
	
	bool isOneSided() const;
	bool isHemi() const;

	inline ::Polyhedron* getData() const
	{
		return _data;
	}

	inline bool getStatus() const
	{
		return _data != nullptr;
	}

protected:
	// Use reference counting.
	virtual ~Polyhedron(); 

private:
	std::string _symbol;

	::Polyhedron* _data;
};

extern OSGKALEIDO_EXPORT osg::Vec3Array* createVertices(Polyhedron const*);
extern OSGKALEIDO_EXPORT osg::Geometry* createFaces(Polyhedron const*, Polyhedron::Faces=Polyhedron::Faces::All);

} // osgKaleido

#endif // OSGKALEIDO_POLYHEDRON_INCLUDED